shader_type canvas_item;

uniform vec4 color1 = vec4(0.15686275064945,0.04313725605607,0.1294117718935,1.0);
uniform vec4 color2 = vec4(0.1294117718935,0.1176470592618,0.16470588743687,1.0);
uniform vec4 color3 = vec4(0.2352941185236,0.1843137294054,0.22352941334248,1.0);
uniform vec4 color4 = vec4(0.37254902720451,0.14117647707462,0.26666668057442,1.0);
uniform vec4 color5 = vec4(0.29803922772408,0.23137255012989,0.28235295414925,1.0);
uniform vec4 color6 = vec4(0.15686275064945,0.29411765933037,0.48627451062202,1.0);
uniform vec4 color7 = vec4(0.45098039507866,0.28235295414925,0.36078432202339,1.0);
uniform vec4 color8 = vec4(0.33725491166115,0.35686275362968,0.49019607901573,1.0);
uniform vec4 color9 = vec4(0.54901963472366,0.41176471114159,0.46274510025978,1.0);
uniform vec4 color10 = vec4(0.7843137383461,0.36862745881081,0.42352941632271,1.0);
uniform vec4 color11 = vec4(0.7843137383461,0.36862745881081,0.42352941632271,1.0);
uniform vec4 color12 = vec4(0.44705882668495,0.35686275362968,0.59607845544815,1.0);
uniform vec4 color13 = vec4(0.28627452254295,0.43529412150383,0.57647061347961,1.0);
uniform vec4 color14 = vec4(0.45490196347237,0.41568627953529,0.57647061347961,1.0);
uniform vec4 color15 = vec4(0.40000000596046,0.39215686917305,0.72549021244049,1.0);
uniform vec4 color16 = vec4(0.56078433990479,0.46666666865349,0.71764707565308,1.0);
uniform vec4 color17 = vec4(0.4705882370472,0.91764706373215,0.68627452850342,1.0);
uniform vec4 color18 = vec4(0.65098041296005,0.60784316062927,0.71764707565308,1.0);
uniform vec4 color19 = vec4(0.81960785388947,0.61568629741669,0.64313727617264,1.0);
uniform vec4 color20 = vec4(0.66274511814117,0.56470590829849,0.82745099067688,1.0);
uniform vec4 color21 = vec4(0.59215688705444,0.71764707565308,0.839215695858,1.0);
uniform vec4 color22 = vec4(0.99607843160629,0.678431391716,0.75294119119644,1.0);
uniform vec4 color23 = vec4(0.52549022436142,0.77647060155869,0.85098040103912,1.0);
uniform vec4 color24 = vec4(0.73725491762161,0.85098040103912,0.99607843160629,1.0);
uniform vec4 color25 = vec4(0.65098041296005,0.8941176533699,0.91764706373215,1.0);
uniform vec4 color26 = vec4(0.65098041296005,0.8941176533699,0.93333333730698,1.0);
uniform vec4 color27 = vec4(0.98823529481888,0.83137255907059,0.83137255907059,1.0);
uniform vec4 color28 = vec4(0.85882353782654,0.91764706373215,1.0,1.0);
uniform vec4 color29 = vec4(0.93333333730698,0.98039215803146,1.0,1.0);


uniform sampler2D SCREEN_TEXTURE: hint_screen_texture,filter_linear_mipmap;
void fragment() {

    vec4 colors[29] = {
        color1,  color2,  color3,  color4,  color5,
        color6,  color7,  color8,  color9,  color10,
        color11, color12, color13, color14, color15,
        color16, color17, color18, color19, color20,
        color21, color22, color23, color24, color25,
        color26, color27, color28, color29
    };
	float min_diff = -1.0;
	vec4 min_color = vec4(0.0, 0.0, 0.0, 1.0);

	vec2 uv = SCREEN_UV;

	vec4 temp = textureLod(SCREEN_TEXTURE, uv, 0.0);

	min_diff = 1000.0;
	for (int i = 0; i < colors.length(); i++) {

		float curr_dist = distance(colors[i], temp);
		if (curr_dist < min_diff) {
			min_diff = curr_dist;
			min_color = colors[i];
		}
	}

	COLOR.rgb = min_color.rgb;
}